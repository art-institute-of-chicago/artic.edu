@use "../setup/colors";
@use "../setup/mixins/breakpoint";
@use "../setup/mixins/grid";
@use "../setup/variables";

@use "sass:map";

.o-features {
  display: flex;
  position: relative;
  flex-flow: row wrap;
  margin-top: 0;

  @include breakpoint.breakpoint('small') {
    margin-right: grid.colspan(2, small, 0, true);
    margin-left: grid.colspan(2, small, 0, true);
  }

  @include breakpoint.breakpoint('medium') {
    margin-right: grid.colspan(2, medium, 0, true);
    margin-left: grid.colspan(2, medium, 0, true);
  }

  @include breakpoint.breakpoint('large') {
    margin-right: grid.colspan(2, large, 0, true);
    margin-left: grid.colspan(2, large, 0, true);
  }

  @include breakpoint.breakpoint('xlarge') {
    margin-right: grid.colspan(2, xlarge, 0, true);
    margin-left: grid.colspan(2, xlarge, 0, true);
  }
}

.o-features > * {
  flex: 0 0 auto;
}

.o-features > *:not(.m-listing--hero) {
  width: 100%;
  margin-top: #{map.get(variables.$grid-margin-tops, 'xsmall')}px;
  padding-top: grid.colspan(map.get(variables.$grid-padding-tops, 'xsmall'), 'xsmall');

  @include breakpoint.breakpoint('xsmall') {
    &:first-child {
      margin-top: 12px;
      padding-top: 30px;
    }
  }

  @include breakpoint.breakpoint('small+') {
    width: grid.colspan(grid.grid-cols-to-colspan(2), 'small');
    margin-top: grid.colspan(2, small);
    margin-left: grid.colspan(2, small);
    padding-top: 0;
  }

  @include breakpoint.breakpoint('medium+') {
    width: grid.colspan(grid.grid-cols-to-colspan(2), 'medium');
    margin-top: grid.colspan(2, medium);
    margin-left: grid.colspan(2, medium);
  }

  @include breakpoint.breakpoint('large+') {
    width: grid.colspan(grid.grid-cols-to-colspan(2), 'large');
    margin-top: grid.colspan(2, large);
    margin-left: grid.colspan(2, large);
  }

  @include breakpoint.breakpoint('xlarge') {
    width: grid.colspan(grid.grid-cols-to-colspan(2), 'xlarge');
    margin-top: grid.colspan(2, xlarge);
    margin-left: grid.colspan(2, xlarge);
  }
}

.o-features > *:not(.m-listing--hero)::before {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 1px;
  background-color: colors.$color__rules--primary;
  pointer-events: none;

  @include breakpoint.breakpoint('small+') {
    content: none;
    display: none;
  }
}

.o-features > .m-listing--hero {
  @include breakpoint.breakpoint('small+') {
    left: 0;
    margin-right: grid.colspan(1, small, 0, true);
    margin-left: grid.colspan(1, small, 0, true);
  }

  @include breakpoint.breakpoint('medium+') {
    margin-right: grid.colspan(1, medium, 0, true);
    margin-left: grid.colspan(1, medium, 0, true);
  }

  @include breakpoint.breakpoint('large+') {
    margin-right: grid.colspan(1, large, 0, true);
    margin-left: grid.colspan(1, large, 0, true);
  }

  @include breakpoint.breakpoint('xlarge') {
    //margin-right: colspan(1, xlarge, 0, true);
    //margin-left: colspan(1, xlarge, 0, true);
    margin-right: 0;
    margin-left: calc(((100vw - #{map.get(variables.$main-col-widths, xlarge)}) / -2) + #{grid.colspan(2, xlarge)});
  }
}

.o-features > .m-listing--hero + * {
  padding-top: 0;

  &::before {
    content: none;
    display: none;
  }
}
